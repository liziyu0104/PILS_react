{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pierre\\\\Desktop\\\\PILS\\\\PILS_react\\\\src\\\\Components\\\\TopSect.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { FaSearch } from \"react-icons/fa\";\nimport user from \"../img/user.png\";\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction TopSect() {\n  _s();\n  const [signedIn, setSignedIn] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [pwd, setPwd] = useState(\"\");\n  axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n  const signIn = () => {\n    axios.post('https://stalco.tk/api/user/login', {\n      email: email,\n      password: pwd\n    }).then(function (response) {\n      console.log(response);\n      response.status === 200 && setSignedIn(true);\n      //TODO save Session id dans local storage -> get \n      localStorage.setItem(\"auth\", response.data.data.session_id + \" \" + response.data.data.session_secret);\n    }).catch(function (error) {\n      error.response.status === 404 && notify(\"Compte introuvable\");\n    });\n  };\n  const signUp = () => {\n    axios.post('https://stalco.tk/api/user/signup', {\n      email: email,\n      password: pwd\n    }).then(function (response) {\n      console.log(response);\n      response.status === 200 && setSignedIn(true);\n    }).catch(function (error) {\n      error.response.status === 409 && notify(\"Ce compte existe déjà\");\n    });\n  };\n  const signOut = message => {\n    setSignedIn(false);\n    localStorage.setItem(\"auth\", response.data.data.session_id + \" \" + response.data.data.session_secret);\n  };\n  const notify = message => {\n    toast.error(message, {\n      position: \"top-center\",\n      autoClose: 2000,\n      closeOnClick: true,\n      pauseOnHover: true,\n      progress: undefined,\n      theme: \"light\"\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"top-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-img\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user,\n          alt: \"user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"user-name\",\n        children: \"Welcome\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: signedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"user-name\",\n            children: [\"Vous \\xEAtes connect\\xE9 au compte administrateur de \", email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: signOut,\n            children: \"Se d\\xE9connecter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Text, {\n            className: \"text-muted\",\n            children: \"Vous \\xEAtes membre du personnel ? Connectez-vous pour acc\\xE9der aux fonctionnalit\\xE9s d'administration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"formBasicEmail\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Adresse email : \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"email\",\n              placeholder: \"votre email ici\",\n              onChange: o => {\n                setEmail(o.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"formBasicPassword\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Mot de passe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              placeholder: \"mot de passe\",\n              onChange: o => {\n                setPwd(o.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: signUp,\n            children: \"S'inscrire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secundary\",\n            onClick: signIn,\n            children: \"Se connecter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(TopSect, \"I+hbQWySb5zdJ8nefQ1/B52H6M8=\");\n_c = TopSect;\nexport default TopSect;\nvar _c;\n$RefreshReg$(_c, \"TopSect\");","map":{"version":3,"names":["React","useState","FaSearch","user","axios","Button","Form","ToastContainer","toast","TopSect","signedIn","setSignedIn","email","setEmail","pwd","setPwd","defaults","headers","post","signIn","password","then","response","console","log","status","localStorage","setItem","data","session_id","session_secret","catch","error","notify","signUp","signOut","message","position","autoClose","closeOnClick","pauseOnHover","progress","undefined","theme","o","target","value"],"sources":["C:/Users/Pierre/Desktop/PILS/PILS_react/src/Components/TopSect.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { FaSearch } from \"react-icons/fa\";\r\nimport user from \"../img/user.png\";\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\n\r\nfunction TopSect() {\r\n  const [signedIn, setSignedIn] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [pwd, setPwd] = useState(\"\");\r\n\r\n  axios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\r\n\r\n  const signIn = () => {\r\n    axios.post('https://stalco.tk/api/user/login', {\r\n      email: email,\r\n      password: pwd\r\n    })\r\n    .then(function (response) {\r\n      console.log(response);\r\n      response.status === 200 && setSignedIn(true)\r\n      //TODO save Session id dans local storage -> get \r\n      localStorage.setItem(\"auth\", response.data.data.session_id +\" \"+ response.data.data.session_secret);\r\n\r\n    })\r\n    .catch(function (error) {\r\n      error.response.status === 404 && notify(\"Compte introuvable\");\r\n    });\r\n  }\r\n\r\n  const signUp = () => {\r\n    axios.post('https://stalco.tk/api/user/signup', {\r\n      email: email,\r\n      password: pwd\r\n    })\r\n    .then(function (response) {\r\n      console.log(response);\r\n      response.status === 200 && setSignedIn(true)\r\n    })\r\n    .catch(function (error) {\r\n      error.response.status === 409 && notify(\"Ce compte existe déjà\");\r\n    });\r\n  }\r\n\r\n  const signOut = (message) => {\r\n    setSignedIn(false)\r\n    localStorage.setItem(\"auth\", response.data.data.session_id +\" \"+ response.data.data.session_secret);\r\n  }\r\n\r\n  const notify = (message) => {\r\n    toast.error(message, {\r\n      position: \"top-center\",\r\n      autoClose: 2000,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      progress: undefined,\r\n      theme: \"light\",\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"top-section\">\r\n      <div className=\"user-info\">\r\n        <div className=\"user-img\">\r\n          <img src={user} alt=\"user\" />\r\n        </div>\r\n        <p className=\"user-name\">Welcome</p>\r\n        <>\r\n        {signedIn ? \r\n          <> \r\n          <p className=\"user-name\">Vous êtes connecté au compte administrateur de {email}</p>\r\n          <Button variant=\"primary\" onClick={signOut}>\r\n            Se déconnecter\r\n          </Button>\r\n          </>\r\n        :\r\n        <Form>\r\n          <Form.Text className=\"text-muted\">\r\n            Vous êtes membre du personnel ? Connectez-vous pour accéder aux fonctionnalités d'administration\r\n          </Form.Text>\r\n          <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>Adresse email : </Form.Label>\r\n            <Form.Control type=\"email\" placeholder=\"votre email ici\" onChange={(o) => {setEmail(o.target.value)}} />\r\n           </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n            <Form.Label>Mot de passe</Form.Label>\r\n            <Form.Control type=\"password\" placeholder=\"mot de passe\" onChange={(o) => {setPwd(o.target.value)}}/>\r\n          </Form.Group>\r\n          <Button variant=\"primary\" onClick={signUp}>\r\n            S'inscrire\r\n          </Button>\r\n          <Button variant=\"secundary\" onClick={signIn}>\r\n            Se connecter\r\n          </Button>\r\n        </Form>}\r\n        </>\r\n      </div>\r\n\r\n      \r\n\r\n      <div className=\"search-box\">\r\n        {/* <input type=\"text\" placeholder=\"Search food...\" /> */}\r\n        <i>\r\n          {/* <FaSearch /> */}\r\n        </i>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TopSect;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}